webpackJsonp([1],{"4ml/":function(e,t){},eOoE:function(e,t,a){"use strict";var i=a("7+uW"),r=a("mtWM"),s=a.n(r);i.a.prototype.$axios=s.a,t.a={}},r8Ge:function(e,t){},sFu6:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a("7+uW"),r=a("eOoE"),s=a("Fd2+"),o=(a("4ml/"),a("ppUw")),n=a.n(o),c=a("rnZi"),d=a.n(c),v=a("SGD2"),l=a.n(v),h={name:"Home",components:{},data:function(){return{showErr:!1,latitude:"",longitude:"",err:"",cameraWidth:0,cameraHeight:0}},mounted:function(){navigator.mediaDevices.getUserMedia||navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia?this.initVideo({video:{height:800,facingMode:{exact:"environment"}}}):alert("你的浏览器不支持访问用户媒体设备")},methods:{initVideo:function(e){navigator.mediaDevices.getUserMedia?navigator.mediaDevices.getUserMedia(e).then(this.videoSuccess).catch(this.videoError):navigator.webkitGetUserMedia?navigator.webkitGetUserMedia(e).then(this.videoSuccess).catch(this.videoError):navigator.mozGetUserMedia?navigator.mozGetUserMedia(e).then(this.videoSuccess).catch(this.videoError):navigator.getUserMedia&&navigator.getUserMedia(e).then(this.videoSuccess).catch(this.videoError)},videoSuccess:function(e){var t=this.$refs.video,a=this;t.srcObject=e,t.play(),t.oncanplay=function(){console.log("摄像头分辨率"),console.log(t.videoWidth,t.videoHeight),a.cameraWidth=t.videoWidth,a.cameraHeight=t.videoHeight,a.readImg()}},videoError:function(e){alert("访问用户媒体设备失败：",e.name,e.message),console.log("访问用户媒体设备失败：",e.name,e.message)},readImg:function(){var e=this.$refs.video,t=this.$refs.canvas.getContext("2d"),a=this,i=setInterval(function(){t.drawImage(e,0,0,a.cameraWidth,a.cameraHeight,0,0,478,850);var r=t.getImageData(0,0,478,850);a.readQrcode(r.data,i)},1e3)},readBarcode:function(e,t){var a=this;l.a.decodeSingle({inputStream:{size:1920},locator:{patchSize:"medium",halfSample:!1},decoder:{readers:[{format:"code_128_reader",config:{}}]},locate:!0,src:e},function(e){e&&e.codeResult?(console.log(e.codeResult),clearInterval(t),a.$emit("ondata",e.codeResult.code)):console.log("正在扫条形码...not detected")})},readQrcode:function(e,t){var a=d()(e,478,850,{inversionAttempts:"dontInvert"});a?(clearInterval(t),this.$emit("ondata",a.data),alert("扫码成功，结果是..."+a.data)):console.log("正在扫二维码...")}}},u={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",[this._m(0),this._v(" "),t("video",{ref:"video",staticClass:"video-view",attrs:{autoplay:"",playsinline:"true","webkit-playsinline":"true"}}),this._v(" "),t("canvas",{ref:"canvas",staticStyle:{display:"none"},attrs:{width:"478",height:"850"}})])},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"model"},[t("div",{staticClass:"scanner-view"},[t("div",{staticClass:"scanner-view-arrow arrow1"}),this._v(" "),t("div",{staticClass:"scanner-view-arrow arrow2"}),this._v(" "),t("div",{staticClass:"scanner-view-arrow arrow3"}),this._v(" "),t("div",{staticClass:"scanner-view-arrow arrow4"}),this._v(" "),t("div",{staticClass:"scanner-line"})])])}]};var g=a("VU/8")(h,u,!1,function(e){a("r8Ge")},"data-v-60269038",null).exports;i.a.use(n.a),i.a.use(s.a),new i.a({render:function(e){return e(g)},axios:r.a}).$mount("#app")}},["sFu6"]);
//# sourceMappingURL=watch.fbe33b9d18c9b1732d21.js.map