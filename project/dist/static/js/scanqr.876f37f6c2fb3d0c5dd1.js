webpackJsonp([2],{"4ml/":function(n,t){},WgWq:function(n,t){},eOoE:function(n,t,e){"use strict";var o=e("7+uW"),a=e("mtWM"),r=e.n(a);o.a.prototype.$axios=r.a,t.a={}},jwk4:function(n,t,e){"use strict";e.d(t,"a",function(){return s}),e.d(t,"b",function(){return i});var o=e("//Fk"),a=e.n(o),r=e("SHZo"),c=function(n){r.a.config({debug:!1,appId:n.appId,timestamp:parseInt(n.timestamp),nonceStr:n.nonceStr,signature:n.signature,jsApiList:["scanQRCode","getLocation"]})},s=function(n){return new a.a(function(t,e){c(n),r.a.ready(function(){r.a.getLocation({type:"wgs84",success:function(n){console.warn("微信sdk定位成功",n),t({lat:n.latitude,lng:n.longitude,speed:n.speed,accuracy:n.accuracy})},fail:function(n){console.error("微信sdk定位失败",n),e(n)}})}),r.a.error(function(n){console.log("wxjsapi-error=",n),e(n)})})},i=function(n){return new a.a(function(t,e){c(n),r.a.ready(function(){r.a.checkJsApi({jsApiList:["scanQRCode"],success:function(n){!0===n.checkResult.scanQRCode?r.a.scanQRCode({desc:"scanQRCode desc",needResult:1,scanType:["qrCode","barCode"],success:function(n){console.warn("微信sdk定位成功",n),t({str:n.resultStr});n.resultStr}}):alert("抱歉，当前客户端版本不支持扫一扫")},fail:function(n){console.error("调用微信扫一扫失败",n),e(n)}})}),r.a.error(function(n){console.log("wxjsapi-error=",n),e(n)})})}},yAjs:function(n,t,e){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=e("7+uW"),a=e("eOoE"),r=e("Fd2+"),c=(e("4ml/"),e("ppUw")),s=e.n(c),i=e("SHZo"),u=e("jwk4"),l={name:"Scan",components:{},data:function(){return{loading:!1,config:null,result:""}},mounted:function(){this.getConfig()},methods:{getConfig:function(){var n=this;this.$axios({method:"post",url:"/proxy/raptorCustomerServer/service/weChatPublicNumber/test/getTicketSignature.do",data:{url:location.href.split("#")[0]}}).then(function(t){if(t){var e=t.data.data;console.log(e),n.config=e,n.loading=!0}}).catch(function(n){console.error("获取定位失败",n)})},wxScanCode:function(){var n=this;this.$handleScanQR(this.config).then(function(t){n.result=t.str}).catch(function(n){console.error("扫描二维码失败",n)})}}},d={render:function(){var n=this,t=n.$createElement,e=n._self._c||t;return e("div",[e("div",{staticStyle:{margin:"16px"}},[e("van-button",{attrs:{round:"",block:"",type:"info",loading:!n.loading,"loading-text":"加载..."},on:{click:function(t){return n.wxScanCode()}}},[n._v("扫码签到")])],1),n._v(" "),e("van-cell-group",[e("van-cell",{attrs:{title:"扫码结果"},scopedSlots:n._u([{key:"default",fn:function(){return[e("span",[n._v(n._s(n.result))])]},proxy:!0}])})],1)],1)},staticRenderFns:[]};var f=e("VU/8")(l,d,!1,function(n){e("WgWq")},"data-v-7baf5e05",null).exports;o.a.prototype.wx=i.a,o.a.prototype.$handleGetLocation=u.a,o.a.prototype.$handleScanQR=u.b,o.a.use(s.a),o.a.use(r.a),new o.a({render:function(n){return n(f)},axios:a.a}).$mount("#app")}},["yAjs"]);
//# sourceMappingURL=scanqr.876f37f6c2fb3d0c5dd1.js.map