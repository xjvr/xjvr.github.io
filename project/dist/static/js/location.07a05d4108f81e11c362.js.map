{"version":3,"sources":["webpack:///./src/axios/index.js","webpack:///src/pages/locate/Location.vue","webpack:///./src/pages/locate/Location.vue?10b1","webpack:///./src/pages/locate/Location.vue","webpack:///./src/pages/locate/location.js"],"names":["__WEBPACK_IMPORTED_MODULE_0_vue__","__webpack_require__","__WEBPACK_IMPORTED_MODULE_1_axios__","__WEBPACK_IMPORTED_MODULE_1_axios___default","n","Vue","prototype","$axios","axios","__webpack_exports__","Location","name","components","data","showErr","latitude","longitude","err","result","mounted","methods","wxScanCode","this","method","url","location","href","split","then","res","config","console","log","weixin_jsapi","debug","appId","timestamp","nonceStr","signature","jsApiList","ready","checkJsApi","success","checkResult","scanQRCode","desc","needResult","scanType","resultStr","alert","fail","error","errMsg","getLocation","navigator","geolocation","getCurrentPosition","showPosition","showError","position","coords","code","PERMISSION_DENIED","POSITION_UNAVAILABLE","TIMEOUT","UNKNOWN_ERROR","locate_Location","render","_vm","_h","$createElement","_c","_self","staticStyle","margin","attrs","round","block","type","on","click","$event","_v","staticRenderFns","pages_locate_Location","normalizeComponent","wx","use","vueCookies","Vant","h","$mount"],"mappings":"2EAAA,IAAAA,EAAAC,EAAA,QAAAC,EAAAD,EAAA,QAAAE,EAAAF,EAAAG,EAAAF,GAMAG,IAAIC,UAAUC,OAASC,IACRC,EAAA,8KC0BfC,GACAC,KAAA,OACAC,cACAC,KAHA,WAIA,OACAC,SAAA,EACAC,SAAA,GACAC,UAAA,GACAC,IAAA,GACAC,OAAA,KAGAC,QAZA,aAgBAC,SACAC,WADA,WAEAC,KAAAf,QACAgB,OAAA,OACAC,IACA,oFACAX,MAAAW,IAAAC,SAAAC,KAAAC,MAAA,WACAC,KAAA,SAAAC,GACA,IAAAC,EAAAD,EAAAhB,UACAkB,QAAAC,IAAAF,GACQG,EAAA,EAARH,QACAI,OAAA,EACAC,MAAAL,EAAAK,MACAC,UAAAN,EAAAM,UACAC,SAAAP,EAAAO,SACAC,UAAAR,EAAAQ,UACAC,WAAA,gBAGQN,EAAA,EAARO,MAAA,WAGUP,EAAA,EAAVQ,YAEAF,WAAA,cACAG,QAAA,SAAAb,IAEA,IAAAA,EAAAc,YAAAC,WACgBX,EAAA,EAAhBW,YAEAC,KAAA,kBACAC,WAAA,EACAC,UAAA,oBACAL,QAAA,SAAAb,GACAA,EAAAmB,UAEA1B,KAAAT,KAAAK,OAAAW,KAQAoB,MAAA,qBAGAC,KAAA,SAAArB,GAEAoB,MAAA,OAAApB,QAMQI,EAAA,EAARkB,MAAA,SAAAtB,GAEAoB,MAAA,WAAApB,EAAAuB,aAKAC,YA9DA,WAgEAC,UAAAC,YACAD,UAAAC,YAAAC,mBACAlC,KAAAmC,aACAnC,KAAAoC,YAGApC,KAAAL,IAAA,gDACAc,QAAAC,IAAA,aACAV,KAAAR,SAAA,IAGA2C,aA3EA,SA2EAE,GACArC,KAAAP,SAAA4C,EAAAC,OAAA7C,SACAO,KAAAN,UAAA2C,EAAAC,OAAA5C,UACAM,KAAAR,SAAA,GAGA4C,UAjFA,SAiFAP,GACA,OAAAA,EAAAU,MACA,KAAAV,EAAAW,kBACA/B,QAAAC,IAAA,4CACAV,KAAAL,IAAA,WACA,MACA,KAAAkC,EAAAY,qBACAhC,QAAAC,IAAA,wCACAV,KAAAL,IAAA,WACA,MACA,KAAAkC,EAAAa,QACAjC,QAAAC,IAAA,+CACAV,KAAAL,IAAA,SACA,MACA,KAAAkC,EAAAc,cACAlC,QAAAC,IAAA,8BACAV,KAAAL,IAAA,SAGAK,KAAAR,SAAA,KClJeoD,GADEC,OAFP,WAAgB,IAAAC,EAAA9C,KAAa+C,EAAAD,EAAAE,eAA0BC,EAAAH,EAAAI,MAAAD,IAAAF,EAAwB,OAAAE,EAAA,OAAAA,EAAA,OAA2BE,aAAaC,OAAA,UAAiBH,EAAA,cAAmBI,OAAOC,MAAA,GAAAC,MAAA,GAAAC,KAAA,QAAoCC,IAAKC,MAAA,SAAAC,GAAyB,OAAAb,EAAA/C,iBAA0B+C,EAAAc,GAAA,kBAExOC,oBCqBjBC,EAvBUnF,EAAQ,OAcjCoF,CACE3E,EACAwD,GATF,EAEA,KAEA,KAEA,MAUgC,QCdhC7D,IAAIC,UAAUgF,GAAKA,IAEnBjF,IAAIkF,IAAIC,KACRnF,IAAIkF,IAAIE,KAER,IAAIpF,KACF8D,OAAQ,SAAAuB,GAAA,OAAKA,EAAEhF,IAChBF,YACEmF,OAAO","file":"static/js/location.07a05d4108f81e11c362.js","sourcesContent":["/*引入Vue框架*/\r\nimport Vue from 'vue';\r\n/*引入资源请求插件*/\r\nimport axios from 'axios';\r\n\r\n/*使用axios插件*/\r\nVue.prototype.$axios = axios;\r\nexport default({\r\n});\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/axios/index.js","<template>\n  <!-- begin:: Page -->\n  <div>\n    <!-- <div style=\"margin: 16px;\">\n      <van-button round block type=\"info\" @click=\"getLocation()\">获取定位</van-button>\n    </div> -->\n    <!-- <van-cell-group>\n      <van-cell title=\"经度\">\n        <template #default>\n          <span>{{ latitude }}</span>\n        </template>\n      </van-cell>\n      <van-cell title=\"纬度\">\n        <template #default>\n          <span>{{ longitude }}</span>\n        </template>\n      </van-cell>\n      <van-cell v-if=\"showErr\" title=\"错误\">\n        <template #default>\n          <span>{{ err }}</span>\n        </template>\n      </van-cell>\n    </van-cell-group> -->\n    <div style=\"margin: 16px;\">\n      <van-button round block type=\"info\" @click=\"wxScanCode()\">扫描二维码</van-button>\n    </div>\n  </div>\n</template>\n\n<script>\n//  import wx from 'weixin-js-sdk'; //这个是坑\nimport wx from \"weixin-jsapi\"; //es6版本的js-sdk\n\nexport default {\n  name: \"Home\",\n  components: {},\n  data() {\n    return {\n      showErr: false,\n      latitude: \"\",\n      longitude: \"\",\n      err: \"\",\n      result: \"\" // 扫码结果\n    };\n  },\n  mounted() {\n    // 页面加载完成唤醒微信扫一扫\n    // this.wxScanCode();\n  },\n  methods: {\n    wxScanCode() {\n      this.$axios({\n        method: \"post\",\n        url:\n          \"/proxy/raptorCustomerServer/service/weChatPublicNumber/test/getTicketSignature.do\",\n        data: { url: location.href.split(\"#\")[0] } //向服务端提供授权url参数，并且不需要#后面的部分\n      }).then(res => {\n        let config = res.data.data;\n        console.log(config);\n        wx.config({\n          debug: false, // 开启调试模式,\n          appId: config.appId, // 必填，企业号的唯一标识，此处填写企业号corpid\n          timestamp: config.timestamp, // 必填，生成签名的时间戳\n          nonceStr: config.nonceStr, // 必填，生成签名的随机串\n          signature: config.signature, // 必填，签名，见附录1\n          jsApiList: [\"scanQRCode\"] // 必填，需要使用的JS接口列表，所有JS接口列表见附录2\n        });\n\n        wx.ready(function() {\n          // config信息验证成功后会执行ready方法,所有接口调用都必须在config接口获得结果之后\n          // config 是一个客户端的异步操作,所以如果需要在页面加载时调用相关接口,则须把相关接口放在ready函数中调用来确保正确执行.对于用户触发是才调用的接口,则可以直接调用,不需要放在ready函数中\n          wx.checkJsApi({\n            // 判断当前客户端版本是否支持指定JS接口\n            jsApiList: [\"scanQRCode\"],\n            success: function(res) {\n              // 以键值对的形式返回，可用true，不可用false。如：{\"checkResult\":{\"scanQRCode\":true},\"errMsg\":\"checkJsApi:ok\"}\n              if (res.checkResult.scanQRCode === true) {\n                wx.scanQRCode({\n                  // 微信扫一扫接口\n                  desc: \"scanQRCode desc\",\n                  needResult: 0, // 默认为0，扫描结果由微信处理，1则直接返回扫描结果，\n                  scanType: [\"qrCode\", \"barCode\"], // 可以指定扫二维码还是一维码，默认二者都有\n                  success: function(res) {\n                    var result = res.resultStr; // 当needResult 为 1 时，扫码返回的结果\n                    // location.href=res.resultStr;//扫描结果传递到的处理页面,跳转到这个页面\n                    this.data.result = res;\n                    // location.href=res.resultStr;//扫描结果传递到的处理页面,跳转到这个页面\n                    // sessionStorage.setItem('saomiao_result',result);\n                    //其它网页调用二维码扫描结果：\n                    // var result = sessionStorage.getItem(\"saomiao_result\");\n                  }\n                });\n              } else {\n                alert(\"抱歉，当前客户端版本不支持扫一扫\");\n              }\n            },\n            fail: function(res) {\n              // 检测getNetworkType该功能失败时处理\n              alert(\"fail\" + res);\n            }\n          });\n        });\n\n        /* 处理失败验证 */\n        wx.error(function(res) {\n          // config 信息验证失败会执行error函数,如签名过期导致验证失败,具体错误信息可以打开config的debug模式查看,也可以在返回的res参数中查看,对于SPA可以在这里更新签名\n          alert(\"配置验证失败: \" + res.errMsg);\n        });\n      });\n    },\n\n    getLocation() {\n      // HTML5方法\n      if (navigator.geolocation) {\n        navigator.geolocation.getCurrentPosition(\n          this.showPosition,\n          this.showError\n        );\n      } else {\n        this.err = \"Geolocation is not supported by this browser.\";\n        console.log(\"此浏览此不支持定位\");\n        this.showErr = true;\n      }\n    },\n    showPosition(position) {\n      this.latitude = position.coords.latitude;\n      this.longitude = position.coords.longitude;\n      this.showErr = false;\n      // this.location = true;\n    },\n    showError(error) {\n      switch (error.code) {\n        case error.PERMISSION_DENIED:\n          console.log(\"User denied the request for Geolocation.\");\n          this.err = \"定位权限获取失败\";\n          break;\n        case error.POSITION_UNAVAILABLE:\n          console.log(\"Location information is unavailable.\");\n          this.err = \"定位信息获取失败\";\n          break;\n        case error.TIMEOUT:\n          console.log(\"The request to get user location timed out.\");\n          this.err = \"获取定位超时\";\n          break;\n        case error.UNKNOWN_ERROR:\n          console.log(\"An unknown error occurred.\");\n          this.err = \"发生未知错误\";\n          break;\n      }\n      this.showErr = true;\n    }\n  }\n};\n</script>\n\n\n\n// WEBPACK FOOTER //\n// src/pages/locate/Location.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('div',{staticStyle:{\"margin\":\"16px\"}},[_c('van-button',{attrs:{\"round\":\"\",\"block\":\"\",\"type\":\"info\"},on:{\"click\":function($event){return _vm.wxScanCode()}}},[_vm._v(\"扫描二维码\")])],1)])}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-6637401f\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/pages/locate/Location.vue\n// module id = null\n// module chunks = ","var normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./Location.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./Location.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-6637401f\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./Location.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = null\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/pages/locate/Location.vue\n// module id = null\n// module chunks = ","import Vue from 'vue'\nimport axios from '@/axios';\nimport Vant from 'vant';\nimport 'vant/lib/index.css';\nimport vueCookies from 'vue-cookies'\nimport Location from './Location.vue'\n// 在main.js中引入 weixin-jsapi\nimport wx from \"weixin-jsapi\"; \n// 在main.js中注册 weixin-jsapi\nVue.prototype.wx = wx\n\nVue.use(vueCookies);\nVue.use(Vant);\n\nnew Vue({\n  render: h => h(Location),\n\taxios\n}).$mount('#app')\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/locate/location.js"],"sourceRoot":""}