webpackJsonp([1],{"4ml/":function(e,t){},Vx4x:function(e,t){},eOoE:function(e,t,i){"use strict";var o=i("7+uW"),a=i("mtWM"),r=i.n(a);o.a.prototype.$axios=r.a,t.a={}},sFu6:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=i("7+uW"),a=i("eOoE"),r=i("Fd2+"),s=(i("4ml/"),i("ppUw")),n=i.n(s),c=i("rnZi"),d=i.n(c),l=i("SGD2"),h=i.n(l),v={name:"Home",components:{},data:function(){return{showErr:!1,latitude:"",longitude:"",err:"",cameraWidth:0,cameraHeight:0}},mounted:function(){navigator.mediaDevices.getUserMedia||navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia?this.initVideo({video:{height:800,facingMode:{exact:"environment"}}}):alert("你的浏览器不支持访问用户媒体设备")},methods:{getLocation:function(){var e=this;this.$getLocation().then(function(t){console.warn("首页获取位置成功",t),e.latitude=t.lat,e.longitude=t.lng}).catch(function(e){console.error("首页获取位置失败",e)}),navigator.geolocation?navigator.geolocation.getCurrentPosition(this.showPosition,this.showError):(this.err="Geolocation is not supported by this browser.",console.log("此浏览此不支持定位"),this.showErr=!0)},showPosition:function(e){this.latitude=e.coords.latitude,this.longitude=e.coords.longitude,this.showErr=!1},showError:function(e){switch(e.code){case e.PERMISSION_DENIED:console.log("User denied the request for Geolocation."),this.err="定位权限获取失败";break;case e.POSITION_UNAVAILABLE:console.log("Location information is unavailable."),this.err="定位信息获取失败";break;case e.TIMEOUT:console.log("The request to get user location timed out."),this.err="获取定位超时";break;case e.UNKNOWN_ERROR:console.log("An unknown error occurred."),this.err="发生未知错误"}this.showErr=!0},initVideo:function(e){navigator.mediaDevices.getUserMedia?navigator.mediaDevices.getUserMedia(e).then(this.videoSuccess).catch(this.videoError):navigator.webkitGetUserMedia?navigator.webkitGetUserMedia(e).then(this.videoSuccess).catch(this.videoError):navigator.mozGetUserMedia?navigator.mozGetUserMedia(e).then(this.videoSuccess).catch(this.videoError):navigator.getUserMedia&&navigator.getUserMedia(e).then(this.videoSuccess).catch(this.videoError)},videoSuccess:function(e){var t=this.$refs.video,i=this;t.srcObject=e,t.play(),t.oncanplay=function(){console.log("摄像头分辨率"),console.log(t.videoWidth,t.videoHeight),i.cameraWidth=t.videoWidth,i.cameraHeight=t.videoHeight,i.readImg()}},videoError:function(e){alert("访问用户媒体设备失败：",e.name,e.message),console.log("访问用户媒体设备失败：",e.name,e.message)},readImg:function(){var e=this.$refs.video,t=this.$refs.canvas.getContext("2d"),i=this,o=setInterval(function(){t.drawImage(e,0,0,i.cameraWidth,i.cameraHeight,0,0,478,850);var a=t.getImageData(0,0,478,850);i.readQrcode(a.data,o)},1e3)},readBarcode:function(e,t){var i=this;h.a.decodeSingle({inputStream:{size:1920},locator:{patchSize:"medium",halfSample:!1},decoder:{readers:[{format:"code_128_reader",config:{}}]},locate:!0,src:e},function(e){e&&e.codeResult?(console.log(e.codeResult),clearInterval(t),i.$emit("ondata",e.codeResult.code)):console.log("正在扫条形码...not detected")})},readQrcode:function(e,t){var i=d()(e,478,850,{inversionAttempts:"dontInvert"});i?(clearInterval(t),this.$emit("ondata",i.data),alert("扫码成功，结果是..."+i.data)):console.log("正在扫二维码...")}}},u={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",[this._m(0),this._v(" "),t("video",{ref:"video",staticClass:"video-view",attrs:{autoplay:"",playsinline:"true","webkit-playsinline":"true"}}),this._v(" "),t("canvas",{ref:"canvas",staticStyle:{display:"none"},attrs:{width:"478",height:"850"}})])},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"model"},[t("div",{staticClass:"scanner-view"},[t("div",{staticClass:"scanner-view-arrow arrow1"}),this._v(" "),t("div",{staticClass:"scanner-view-arrow arrow2"}),this._v(" "),t("div",{staticClass:"scanner-view-arrow arrow3"}),this._v(" "),t("div",{staticClass:"scanner-view-arrow arrow4"}),this._v(" "),t("div",{staticClass:"scanner-line"})])])}]};var g=i("VU/8")(v,u,!1,function(e){i("Vx4x")},"data-v-6eae5a88",null).exports;o.a.use(n.a),o.a.use(r.a),new o.a({render:function(e){return e(g)},axios:a.a}).$mount("#app")}},["sFu6"]);
//# sourceMappingURL=watch.9b2acddf9c67636f69b0.js.map