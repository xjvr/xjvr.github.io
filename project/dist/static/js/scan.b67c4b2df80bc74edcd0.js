webpackJsonp([1],{"4ml/":function(t,n){},IlAB:function(t,n,e){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o=e("7+uW"),a=e("eOoE"),c=e("Fd2+"),r=(e("4ml/"),e("ppUw")),i=e.n(r),s=e("SHZo"),u=e("jwk4"),l={name:"Scan",components:{},data:function(){return{config:null,latitude:"",longitude:"",enterRange:!1,locationSuccess:!1,result:""}},mounted:function(){this.getLocation()},methods:{getLocation:function(){var t=this;this.locationSuccess=!1,this.enterRange=!1,this.latitude="",this.longitude="",this.$axios({method:"post",url:"/proxy/raptorCustomerServer/service/weChatPublicNumber/test/getTicketSignature.do",data:{url:location.href.split("#")[0]}}).then(function(n){if(n){var e=n.data.data;console.log(e),t.config=e,t.$handleGetLocation(e).then(function(n){console.warn("首页获取位置成功",n),t.latitude=n.lat,t.longitude=n.lng,t.locationSuccess=!0,t.enterRange=!0}).catch(function(t){console.error("获取定位失败",t)})}}).catch(function(t){console.error("获取定位失败",t)})},wxScanCode:function(){var t=this;this.$handleScanQR(this.config).then(function(n){t.result=n.str}).catch(function(t){console.error("扫描二维码失败",t)})}}},d={render:function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("div",[e("div",{staticStyle:{padding:"10px 0"}},[e("span",{staticClass:"title"},[t._v("定位信息")]),t._v(" "),e("van-button",{staticStyle:{float:"right","margin-right":"10px"},attrs:{plain:"",size:"mini",type:"info",icon:"location-o"},on:{click:function(n){return t.getLocation()}}},[t._v("重新定位")])],1),t._v(" "),e("van-cell-group",[e("van-cell",{attrs:{title:"经度"},scopedSlots:t._u([{key:"default",fn:function(){return[e("span",[t._v(t._s(t.latitude))])]},proxy:!0}])}),t._v(" "),e("van-cell",{attrs:{title:"纬度"},scopedSlots:t._u([{key:"default",fn:function(){return[e("span",[t._v(t._s(t.longitude))])]},proxy:!0}])}),t._v(" "),t.showErr?e("van-cell",{attrs:{title:"错误"},scopedSlots:t._u([{key:"default",fn:function(){return[e("span",[t._v(t._s(t.err))])]},proxy:!0}],null,!1,4277965029)}):t._e()],1),t._v(" "),e("div",{staticStyle:{margin:"16px"}},[e("van-button",{attrs:{round:"",block:"",type:"info",loading:!t.enterRange,"loading-text":"定位中..."},on:{click:function(n){return t.wxScanCode()}}},[t._v("扫码签到")])],1),t._v(" "),e("van-cell-group",[e("van-cell",{attrs:{title:"扫码结果"},scopedSlots:t._u([{key:"default",fn:function(){return[e("span",[t._v(t._s(t.result))])]},proxy:!0}])})],1)],1)},staticRenderFns:[]};var f=e("VU/8")(l,d,!1,function(t){e("T78i")},"data-v-6853ad14",null).exports;o.a.prototype.wx=s.a,o.a.prototype.$handleGetLocation=u.a,o.a.prototype.$handleScanQR=u.b,o.a.use(i.a),o.a.use(c.a),new o.a({render:function(t){return t(f)},axios:a.a}).$mount("#app")},T78i:function(t,n){},eOoE:function(t,n,e){"use strict";var o=e("7+uW"),a=e("mtWM"),c=e.n(a);o.a.prototype.$axios=c.a,n.a={}},jwk4:function(t,n,e){"use strict";e.d(n,"a",function(){return i}),e.d(n,"b",function(){return s});var o=e("//Fk"),a=e.n(o),c=e("SHZo"),r=function(t){c.a.config({debug:!1,appId:t.appId,timestamp:parseInt(t.timestamp),nonceStr:t.nonceStr,signature:t.signature,jsApiList:["scanQRCode","getLocation"]})},i=function(t){return new a.a(function(n,e){r(t),c.a.ready(function(){c.a.getLocation({type:"wgs84",success:function(t){console.warn("微信sdk定位成功",t),n({lat:t.latitude,lng:t.longitude,speed:t.speed,accuracy:t.accuracy})},fail:function(t){console.error("微信sdk定位失败",t),e(t)}})}),c.a.error(function(t){console.log("wxjsapi-error=",t),e(t)})})},s=function(t){return new a.a(function(n,e){r(t),c.a.ready(function(){c.a.checkJsApi({jsApiList:["scanQRCode"],success:function(t){!0===t.checkResult.scanQRCode?c.a.scanQRCode({desc:"scanQRCode desc",needResult:1,scanType:["qrCode","barCode"],success:function(t){console.warn("微信sdk定位成功",t),n({str:t.resultStr});t.resultStr}}):alert("抱歉，当前客户端版本不支持扫一扫")},fail:function(t){console.error("调用微信扫一扫失败",t),e(t)}})}),c.a.error(function(t){console.log("wxjsapi-error=",t),e(t)})})}}},["IlAB"]);
//# sourceMappingURL=scan.b67c4b2df80bc74edcd0.js.map